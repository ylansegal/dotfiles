#!/usr/bin/env bash
# Opens jira on a specific ticket. If no argument is provided, it will try
# to obtain the ticket number from the branch

# Unofficial strict mode:
set -euo pipefail
IFS=$'\n\t'

base_url="https://procoretech.atlassian.net/browse"
ticket_number=${1:-$(git branch | grep '*' | awk '{print $2}' | sed -E 's/.*([A-Z]{2,4}-[0-9]{1,5}).*/\1/')}

set -x
open "$base_url/$ticket_number"
